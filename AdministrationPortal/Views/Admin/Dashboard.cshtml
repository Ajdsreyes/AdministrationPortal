@model AdministrationPortal.Models.ViewModels.AdminDashboardVM


@{
    ViewData["Title"] = "Dashboard";
}

<!-- HEADER -->
<div class="header">
    <div>
        <h2>Mabuhay, Barangay Malanday!</h2>
        <p>Maligayang pagbabalik, kaibigan</p>
    </div>
</div>

<div class="stats">

    <div class="card">
        <div class="card-icon">
            <i class="bi bi-people-fill"></i>
        </div>
        <p>Total Registered Users</p>
        <h3 class="counter" data-target="@Model.TotalUsers">0</h3>
        <small>Last update: 12 Jan 2026</small>
    </div>

    <div class="card">
        <div class="card-icon">
            <i class="bi bi-file-earmark-text"></i>
        </div>
        <p>Total Service Request</p>
        <h3 class="counter" data-target="@Model.TotalRequests">0</h3>
        <small>Last update: 12 Jan 2026</small>
    </div>

    <div class="card">
        <div class="card-icon">
            <i class="bi bi-check-circle"></i>
        </div>
        <p>Approved Requests</p>
        <h3 class="counter" data-target="@Model.ApprovedRequests">0</h3>
        <small>Last update: 12 Jan 2026</small>
    </div>

    <div class="card">
        <div class="card-icon">
            <i class="bi bi-x-circle"></i>
        </div>
        <p>Rejected Requests</p>
        <h3 class="counter" data-target="@Model.RejectedRequests">0</h3>
        <small>Last update: 12 Jan 2026</small>
    </div>

    <div class="card">
        <div class="card-icon">
            <i class="bi bi-folder-check"></i>
        </div>
        <p>Ready to Claim Documents</p>
        <h3 class="counter" data-target="@Model.ReadyToClaim">0</h3>
        <small>Last update: 12 Jan 2026</small>
    </div>

</div>


<!-- LOWER GRID -->
<div class="bottom">
    <div class="documents">
        <div class="section-title">
            <h4>Barangay Documents</h4>
        </div>

        <div class="documents-grid">

            <div class="doc-folder" onclick="openFolder('Barangay Clearance')">
                <i class="bi bi-folder-fill"></i>
                <span>Barangay Clearance</span>
            </div>

            <div class="doc-folder" onclick="openFolder('Barangay Certificate')">
                <i class="bi bi-folder-fill"></i>
                <span>Barangay Certificate</span>
            </div>

            <div class="doc-folder" onclick="openFolder('Cedula')">
                <i class="bi bi-folder-fill"></i>
                <span>Cedula</span>
            </div>

            <div class="doc-folder" onclick="openFolder('Barangay ID')">
                <i class="bi bi-folder-fill"></i>
                <span>Barangay ID</span>
            </div>

        </div>
    </div>

    <div class="right-panels">
        <div class="chart-box">
            <h4>Total Number of Residents</h4>

            <div class="donut">
                <div class="donut-center">
                    <span>15,000</span>
                    <small>Total</small>
                </div>
            </div>
        </div>


        <div class="dashboard-card">

            <div class="card-header">
                <h3>Recent Open</h3>
            </div>

            <div class="card-content">
                <div id="recentOpenCards" class="recent-cards">
                    <div class="recent-empty">
                        No recent folders opened
                    </div>
                </div>
            </div>

        </div>



        <script>
            let recentOpen = [];

            function openFolder(name) {
                // remove if already exists
                recentOpen = recentOpen.filter(x => x !== name);

                // add to top
                recentOpen.unshift(name);

                // keep ONLY last 2
                if (recentOpen.length > 2) {
                    recentOpen = recentOpen.slice(0, 2);
                }

                renderRecentOpen();
            }

            function renderRecentOpen() {
                const container = document.getElementById("recentOpenCards");
                container.innerHTML = "";

                if (recentOpen.length === 0) {
                    container.innerHTML = `
                        <div class="recent-empty">
                            No recent folders opened
                        </div>`;
                    return;
                }

                recentOpen.forEach(item => {
                    const card = document.createElement("div");
                    card.className = "recent-card";
                    card.innerHTML = `
                        <i class="bi bi-folder-fill"></i>
                        <span>${item}</span>
                    `;
                    container.appendChild(card);
                });
            }
        </script>

