@model List<AdministrationPortal.Models.ViewModels.ServiceVM>

<table class="table">
    <thead>
        <tr>
            <th>Service</th>
            <th>Status</th>
            <th>Enable / Disable</th>
        </tr>
    </thead>

    <tbody>
        @foreach (var service in Model)
        {
            <tr>
                <td>@service.ServiceName</td>

                <td>
                    <span class="badge @(service.IsEnabled ? "bg-success" : "bg-danger")">
                        @(service.IsEnabled ? "Enabled" : "Disabled")
                    </span>
                </td>

                <td>
                    <form asp-action="ToggleService"
                          asp-controller="Admin"
                          @* Changed Id to ServiceId to match SQL Primary Key and ServiceVM *@
                          asp-route-id="@service.ServiceId"
                          method="post"
                          class="toggle-form">

                        <label class="switch">
                            <input type="checkbox"
                                   onchange="this.form.submit()"
                                   @(service.IsEnabled ? "checked" : "") />
                            <span class="slider"></span>
                        </label>
                    </form>
                </td>
            </tr>
        }
    </tbody>
</table>